<body class="chats-tab-open">

<!-- Main Layout Start -->
<div class="main-layout">
  <!-- Navigation Start -->
  <app-navigation-bar [activeRoute]="'chats'"></app-navigation-bar>
  <!-- Navigation End -->

  <!-- Sidebar Start -->
  <aside class="sidebar">
    <!-- Tab Content Start -->
    <div class="tab-content">
      <!-- Chat Tab Content Start -->
      <div class="tab-pane active" id="chats-content">
        <div class="d-flex flex-column h-100">
          <div class="hide-scrollbar h-100" id="chatContactsList">

            <!-- Chat Header Start -->
            <app-chat-sidebar-header [headerTitle]="'Chats'"
                                     [placeHolder]="'Search chats...'"></app-chat-sidebar-header>
            <!-- Chat Header End -->

            <!-- Chat Contact List Start -->
            <ul class="contacts-list" id="chatContactTab" data-chat-list="">
              <!-- Chat Item Start -->
              <li *ngFor="let chat of chats">
                <app-chat-item-active [chatName]="chat.title"
                                      [lastMessageAuthor]="chat.lastMessageAuthor"
                                      [lastMessage]="chat.lastMessage"
                                      [lastMessageDateTime]="chat.lastMessageAt"
                                      [chatId]="chat.chatId"
                                      (click)="getChatMessages(chat.chatId)"
                                      [ngClass]="chat.chatId === activeChatId ? 'contacts-item friends active' : 'contacts-item friends'">
                </app-chat-item-active>
              </li>
              <!-- Chat Item End -->

            </ul>
            <!-- Chat Contact List End -->
          </div>
        </div>
      </div>
      <!-- Chats Tab Content End -->
    </div>
    <!-- Tab Content End -->
  </aside>
  <!-- Sidebar End -->

  <!-- Main Start -->
  <main class="main main-visible">

    <!-- Chats Page Start -->
    <div class="chats">
      <div class="chat-body">
        <!-- Chat Header Start-->
        <app-chat-header [chatTitle]="activeChatTitle" [membersCount]="activeChatMembersCount"></app-chat-header>
        <!-- Chat Header End-->

        <!-- Search Start -->
        <div class="collapse border-bottom px-3" id="searchCollapse">
          <div class="container-xl py-2 px-0 px-md-3">
            <div class="input-group bg-light ">
              <input type="text" class="form-control form-control-md border-right-0 transparent-bg pr-0"
                     placeholder="Search...">
              <div class="input-group-append">
                                    <span class="input-group-text transparent-bg border-left-0">
                                        <!-- Default :: Inline SVG -->
                                        <svg class="hw-20 text-muted" fill="none" viewBox="0 0 24 24"
                                             stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                                  d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                        </svg>

                                      <!-- Alternate :: External File link -->
                                      <!-- <img class="injectable hw-20" src="./../assets/media/heroicons/outline/search.svg" alt="Search icon"> -->
                                    </span>
              </div>
            </div>
          </div>

        </div>
        <!-- Search End -->

        <!-- Chat Content Start-->
        <div class="chat-content p-2" id="messageBody">
          <div class="container">

            <!-- Message Day Start -->
            <div class="message-day" id="messageList">

              <div class="message-divider sticky-top pb-2" data-label="Today">&nbsp;</div>

              <div *ngFor="let message of messages">
                <app-received-message [self]="message.self"
                                      [messageAuthor]="message.userDisplayName" [message]="message.messageText"
                                      [sentDateTime]="message.sentAt"></app-received-message>
              </div>
            </div>
            <!-- Message Day End -->
          </div>

          <!-- Scroll to finish -->
          <div class="chat-finished" id="chat-finished"></div>
        </div>
        <!-- Chat Content End-->

        <!-- Chat Footer Start-->
        <div class="chat-footer">
          <div class="form-row">
            <!-- Chat Input Group Start -->
            <div class="col">
              <div class="input-group">
                <!-- Attachment Start -->
                <div class="input-group-prepend mr-sm-2 mr-1">
                  <div class="dropdown">
                    <button class="btn btn-secondary btn-icon btn-minimal btn-sm text-muted text-muted"
                            type="button" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                      <!-- Default :: Inline SVG -->
                      <svg class="hw-20" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                              d="M12 9v3m0 0v3m0-3h3m-3 0H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"/>
                      </svg>

                      <!-- Alternate :: External File link -->
                      <!-- <img class="injectable hw-20" src="./../assets/media/heroicons/outline/plus-circle.svg" alt=""> -->
                    </button>
                    <div class="dropdown-menu">
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/photograph.svg" alt=""> -->
                        <span>Gallery</span>
                      </div>
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M15.536 8.464a5 5 0 010 7.072m2.828-9.9a9 9 0 010 12.728M5.586 15H4a1 1 0 01-1-1v-4a1 1 0 011-1h1.586l4.707-4.707C10.923 3.663 12 4.109 12 5v14c0 .891-1.077 1.337-1.707.707L5.586 15z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/volume-up.svg" alt=""> -->
                        <span>Audio</span>
                      </div>
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/document.svg" alt=""> -->
                        <span>Document</span>
                      </div>
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/user.svg" alt=""> -->
                        <span>Contact</span>
                      </div>
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/location-marker.svg" alt=""> -->
                        <span>Location</span>
                      </div>
                      <div class="dropdown-item">
                        <!-- Default :: Inline SVG -->
                        <svg class="hw-20 mr-2" fill="none" viewBox="0 0 24 24"
                             stroke="currentColor">
                          <path stroke-linecap="round" stroke-linejoin="round"
                                stroke-width="2"
                                d="M16 8v8m-4-5v5m-4-2v2m-2 4h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>

                        <!-- Alternate :: External File link -->
                        <!-- <img class="injectable hw-20 mr-2" src="./../assets/media/heroicons/outline/chart-square-bar.svg" alt=""> -->
                        <span>Poll</span>
                      </div>
                    </div>
                  </div>
                </div>
                <!-- Attachment End -->

                <!-- Textarea Start-->
                <input class="form-control transparent-bg border-0 no-resize hide-scrollbar"
                       [(ngModel)]="activeMessageText"
                       placeholder="Write your message..."/>
                <!-- Textarea End -->
              </div>
            </div>
            <!-- Chat Input Group End -->

            <!-- Submit Button Start -->
            <div class="col-auto">
              <div class="btn btn-primary btn-icon rounded-circle text-light mb-1" role="button"
                   (click)="sendMessage()">
                <!-- Default :: Inline SVG -->
                <svg class="hw-24" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M14 5l7 7m0 0l-7 7m7-7H3"/>
                </svg>

              </div>
            </div>
            <!-- Submit Button End-->
          </div>
        </div>
        <!-- Chat Footer End-->
      </div>

      <!-- Chat Info Start -->
      <app-chat-info></app-chat-info>
      <!-- Chat Info End -->
    </div>
    <!-- Chats Page End -->

  </main>
  <!-- Main End -->

  <div class="backdrop"></div>

</div>
<!-- Main Layout End -->

</body>
